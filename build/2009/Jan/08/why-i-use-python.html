<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="en-us" />
    <meta name="ROBOTS" content="all" />
    <meta name="googlebot" content="noodp" />
    <meta name="MSSmartTagsPreventParsing" content="true" />
    <meta name="Copyright" content="Copyright 2008 Andrew Gwozdziewycz" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="Andrew Gwozdziewycz" />
    <link rel="alternate" title="Latest Entries Atom" href="/atom.xml" type="application/atom+xml" />
    <link rel="shortcut icon" href="/favicon.ico" />        

    <link rel="stylesheet" href="http://sigusr2.net/css/screen.css" media="screen,projector" type="text/css" />
    <link rel="stylesheet" href="/css/today.css" media="screen,projector" type="text/css" />
    <title>SIGUSR2 
 &gt; Anagrams Predicate
</title>
</head>
<body>
  <div id="wrapper">
    <div id="header">
      <h1><a href="/" title="SIGUSR2">SIGUSR2</a></h1>
    </div>
    <div id="content-wrapper" class="clearfix">
      <div id="content">
        
<h2>Anagrams Predicate</h2>
<h4>January 08, 2009 <span class="permalink"><a href="/2009/Jan/08/why-i-use-python.html" title="permalink">#</a></span></h4>
<p><span class="preamble">I often complain about <a href="http://python.org">Python</a> because <a href="http://shootout.alioth.debian.org/u64/which-programming-languages-are-fastest.php?gpp=on&ghc=on&scala=on&java=on&sbcl=on&csharp=on&go=on&ocaml=on&mzscheme=on&hipe=on&v8=on&lua=on&vw=on&python3=on&yarv=on&calc=chart">it's a slow</a> (yes, these benchmarks are flawed, but it still makes my point), <a href="">shitty language</a>, that <a href="http://sigusr2.net/2009/Oct/01/python-worlds.html">isn't bendable</a>, <a href="http://sigusr2.net/2009/Mar/04/dispatching-with-with.html">isn't extendible</a>, but is still perhaps the best language out there in my opinion.</span></p>

<h3>It's Blub</h3>
<p>Python is obviously <a href="http://www.paulgraham.com/avg.html">blub</a>. People who write code in Python will dispute that it's better than language X, because language X lacks "so and so," but most Python programmers can't look past Python to see things that could potentially improve their lives greatly.</p>

<h4>Optimized Tail Calls</h4>

<p><a href="http://c2.com/cgi/wiki?TailCallOptimization">Tail Call Optimization</a> is an extremely useful optimization to have in a programming language. Having it opens up a whole mess of new things to play with, and makes it possible to use recursive algorithms (that are often easier to grok) than their imperative cousins.</p>

<p>Consider writing functions in <a href="http://en.wikipedia.org/wiki/Continuation-passing_style">Continuation Passing Style</a>, which you could potentially use to write different control flow, or generating codefrom a compiler. (This example just computes the factorial of a number):</p>

<pre><code class="python">
def I(value):
    return value

def eq(a, b, cont=I):
    return cont(a == b)

def sub(a, b, cont=I):
    return cont(a - b)

def product(a, b, cont=I):
    return cont(a * b)

def factorial(n, cont=I):
    def compare_cont(truth):
        if truth:
            return cont(1)
        else:
            def sub_cont(diff):
                def new_cont(val):
                    return product(n, val, cont=cont)
                return factorial(diff, cont=new_cont)
            return sub(n, 1, cont=sub_cont)
    return eq(n, 0, cont=compare_cont)
</code></pre>

<p>It's twisted, certainly, but that will compute the factorial of a number using CPS&mdash;in Python, you can only compute up until <code class="inline">n == 142</code> due to Python's lack of tail call optimization.</p>

<p>In this example, we couldn't write <code class="inline">compare_cont</code> as a <code class="inline">lambda</code> because of course because it contains an <code class="inline">if</code> <em>statement</em>, despite the fact that the way it would nest would read much more naturally (i.e. top to bottom):</p>

<pre><code class="python">
def factorial(n, cont=I):
    def compare_cont(truth):
        if truth:
            return cont(1)
        else:
            return sub(n, 1, 
                       cont=lambda diff:
                              factorial(diff, cont=\
                                   lambda val: product(n, val, cont=cont)))
    return eq(n, 0, cont=compare_cont)
</code></pre>

<p>Most people have accepted the fact that <code class="inline">lambda</code> in Python is all but meaningless. Sure, it has its uses, and it certainly executes that one expression with elegance, but face it&mdash;it's annoying.</p>

<p>Is the lack of multi-line anonymous functions a death sentence? No. Is it inconvenient? Certainly, but if you can write a Lisp in a <a href="http://thinkpython.blogspot.com/2008/02/lisp-in-single-expression.html">single line of Python</a>, obviously it's not broken right?</p>

<p>But, back to the point.</p>




<h4>Meta Programming</h4>


<h5 class="tag-list">Tagged: 
  <a href="/tags/algorithms.html">algorithms</a>
     , <a href="/tags/python.html">python</a>
     
</h5>

<div id="disqus_thread"></div><script type="text/javascript" src="http://disqus.com/forums/sigusr2/embed.js"></script><noscript><a href="http://sigusr2.disqus.com/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>


      </div>
      <div id="sidebar">
        <h2>About</h2>
        <p>
          Hi, I'm <a href="http://apgwoz.com" title="My Homepage">Andrew</a>. I sometimes use this space to write about things I'm doing related to programming.
        </p>
        <p>
          You should follow me on <a href="http://identi.ca/apgwoz">Identi.ca</a> or <a href="http://twitter.com/apgwoz">Twitter</a>.
        </p>
	<h2>Inside</h2>
	<ul>
          <li><a href="/page/man.html" title="man page for signal(7)">man signal(7)</a></li>
	</ul>
       <ul>
          <li>
       <!--Ad Bard advertisement snippet, begin -->
       <script type='text/javascript'>
          var ab_h = '65997c9b7b5981e3cf2ebec769eea096';
          var ab_s = '7a46f7b695d2481693fe4724f778884a';
       </script>
       <script type='text/javascript' src='http://cdn1.adbard.net/js/ab1.js'></script>
       <!--Ad Bard, end -->
          </li>
       </ul>

        <h2>Syndicate</h2>
        <ul>
          <li><a href="/atom.xml" title="Atom Feed">Atom</a></li>
        </ul>
        <h2>Archives</h2>
        <ul>
        
        <li><a href="/2010/Apr/" title="April 2010 (1)">April 2010 (1)</a></li>
        
        <li><a href="/2010/Jan/" title="January 2010 (1)">January 2010 (1)</a></li>
        
        <li><a href="/2009/Nov/" title="November 2009 (1)">November 2009 (1)</a></li>
        
        <li><a href="/2009/Oct/" title="October 2009 (1)">October 2009 (1)</a></li>
        
        <li><a href="/2009/Sep/" title="September 2009 (1)">September 2009 (1)</a></li>
        
        <li><a href="/2009/Jul/" title="July 2009 (1)">July 2009 (1)</a></li>
        
        <li><a href="/2009/May/" title="May 2009 (1)">May 2009 (1)</a></li>
        
        <li><a href="/2009/Apr/" title="April 2009 (1)">April 2009 (1)</a></li>
        
        <li><a href="/2009/Mar/" title="March 2009 (1)">March 2009 (1)</a></li>
        
        <li><a href="/2009/Feb/" title="February 2009 (1)">February 2009 (1)</a></li>
        
        <li><a href="/2009/Jan/" title="January 2009 (2)">January 2009 (2)</a></li>
        
        <li><a href="/2008/Dec/" title="December 2008 (1)">December 2008 (1)</a></li>
        
        <li><a href="/2008/Sep/" title="September 2008 (3)">September 2008 (3)</a></li>
        
        </ul>
      </div>
    </div>

    <div id="footer">
       &copy; 2009 <a href="http://apgwoz.com/">Andrew Gwozdziewycz</a>, I like bees. Powered by Modest. Not tested in IE, because it sucks.
    </div>
  </div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-354660-9");
pageTracker._trackPageview();
</script>
</body>
</html>